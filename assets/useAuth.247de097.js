import{k as h,l as r,m as p}from"./index.bab77bf1.js";const g=h("auth",()=>{const t=r("autenticating"),n=r(null),e=r(null),u=r(null);function l(s,o){t.value="autenticated",n.value=s,e.value=o,i(e.value,t.value,n.value)}function i(s,o,c){localStorage.setItem("idToken",s),localStorage.setItem("status",o),localStorage.setItem("user",JSON.stringify(c))}function a(){t.value="autenticated",n.value=null,e.value=null,u.value=null,localStorage.clear()}return{status:t,user:n,token:e,resfreshToken:u,getUserData:l,clearEntryes:a}}),d=()=>{const t="https://http-nodejs-production-3df3.up.railway.app",n=g(),e=p();return{registerUser:async a=>{await fetch(`${t}/api/auth/register`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then(s=>{s.ok&&e.push({name:"login"})})},loginUser:async a=>{await fetch(`${t}/api/auth`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}).then(s=>{s.json().then(o=>{o.ok&&(n.getUserData(o.user,o.token),e.push({name:"platform"}))})})},logoutUser:()=>{e.push({name:"login"}),n.clearEntryes()}}};export{d as u};
